var Mouseflow_RS=function(e){"use strict";function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e,t,r){return(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],u=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t);else for(;!(u=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(e,r){if(e){if("string"==typeof e)return t(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}var c="MOUSEFLOW",f="Mouseflow";o({},f,"Mouseflow"),o(o(o(o(o(o(o(o(o({},c,c),"Mouseflow",c),"mouseflow",c),"mouseFlow",c),"MouseFlow",c),"Mouse flow",c),"mouse flow",c),"mouse Flow",c),"Mouse Flow",c);var d=4,v=function(){var e;d<=2&&(e=console).log.apply(e,arguments)},y=function(){var e;d<=3&&(e=console).warn.apply(e,arguments)},p=function(){var e;d<=4&&(e=console).error.apply(e,arguments)},m="RS_JS_SDK",h=["Request failed with status:"],g=function(e){var t=window.RudderStackGlobals&&window.RudderStackGlobals.errorReporting;t&&e instanceof Error&&t.notify(e)},w=function(e,t){try{return JSON.stringify(e,(r=[],function(e,t){if("object"!==u(t)||null===t)return t;for(;r.length>0&&r[r.length-1]!==this;)r.pop();return r.includes(t)?(v("Circular Reference detected for key: ".concat(e)),"[Circular Reference]"):(r.push(t),t)}))}catch(n){return y("Failed to convert the value to a JSON string."),null}var r},b=function(e,t,r){var n,o;try{n="string"==typeof e?e:e instanceof Error||e.message?e.message:w(e)}catch(a){n=""}if("object"===u(o=e)&&null!==o&&"target"in o){if(e.target&&"script"!==e.target.localName)return"";if(e.target.dataset&&(e.target.dataset.loader!==m||"true"!==e.target.dataset.isnonnativesdk))return"";if(n="error in script loading:: src::  ".concat(e.target.src," id:: ").concat(e.target.id),"ad-block"===e.target.id)return r.page("RudderJS-Initiated","ad-block page request",{path:"/ad-blocked",title:n},r.sendAdblockPageOptions),""}return"[handleError]::".concat("",' "').concat(n,'"')},S=function(e,t,r){var n;try{n=b(e,0,r)}catch(o){p("[handleError] Exception:: ",o),p("[handleError] Original error:: ",w(e)),g(o)}n&&(p(n),function(e){return!e.message||!h.some((function(t){return e.message.includes(t)}))}(e)&&g(e))},k={LOG:{value:0,method:console.log},INFO:{value:1,method:console.info},DEBUG:{value:2,method:console.debug},WARN:{value:3,method:console.warn},ERROR:{value:4,method:console.error}},E=function(){return n((function e(t,n){r(this,e),this.level=+n||k.ERROR.value,this.scope=t||""}),[{key:"setLogLevel",value:function(e){if(e&&"string"==typeof e){var t=e.toUpperCase();this.level=k[t]?k[t].value:this.level}}},{key:"setScope",value:function(e){this.scope=e||this.scope}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logBase(t,k.LOG.value)}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logBase(t,k.INFO.value)}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logBase(t,k.DEBUG.value)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logBase(t,k.WARN.value)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logBase(t,k.ERROR.value)}},{key:"logBase",value:function(e,t){if(this.level<=t){var r=Object.values(k).find((function(e){return e.value===t}));r.method.apply(r,i(this.getLogData(e)))}}},{key:"getLogData",value:function(e){if(Array.isArray(e)&&e.length>0){var t="%c RS SDK";this.scope&&(t="".concat(t," - ").concat(this.scope));var r=e[0].trim();t="".concat(t," %c ").concat(r);var n=[];return n.push(t),n.push("font-weight: bold; background: black; color: white;"),n.push("font-weight: normal;"),n.push.apply(n,i(e.slice(1))),n}return e}}])}(),A=function(e){e&&"object"===u(e)&&Object.entries(e).forEach((function(e){var t=a(e,2),r=t[0],n=t[1];"string"!=typeof n&&"number"!=typeof n||window._mfq.push(["setVariable",r,n])}))},O=function(e){var t,r=(t=e.integrations)&&(t[f]||t[c]),n=null==r?void 0:r.customVariables;A(n)},R=new E(f),j=function(){return n((function e(t,n,o){r(this,e),n.logLevel&&R.setLogLevel(n.logLevel),this.analytics=n,this.websiteId=t.websiteId,this.name=c;var a=null!=o?o:{};this.shouldApplyDeviceModeTransformation=a.shouldApplyDeviceModeTransformation,this.propagateEventsUntransformedOnError=a.propagateEventsUntransformedOnError,this.destinationId=a.destinationId}),[{key:"init",value:function(){window._mfq=window._mfq||[],function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{if(document.getElementById(e))return;var n=document.createElement("script");n.src=t,n.async=void 0===r.async||r.async,n.type="text/javascript",n.id=e,!0!==r.skipDatasetAttributes&&(n.setAttribute("data-loader",m),void 0!==r.isNonNativeSDK&&n.setAttribute("data-isNonNativeSDK",r.isNonNativeSDK));var o=document.getElementsByTagName("head");if(o.length>0)o[0].insertBefore(n,o[0].firstChild);else{var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a)}}catch(a){S(a)}}("mouseflow-integration","https://cdn.mouseflow.com/projects/".concat(this.websiteId,".js"))}},{key:"isLoaded",value:function(){return!!window.mouseflow&&"object"===u(window.mouseflow)}},{key:"isReady",value:function(){return!!window._mfq}},{key:"identify",value:function(e){var t=e.message,r=t.context,n=t.traits,o=t.anonymousId,a=r.traits,i=(null==a?void 0:a.email)||(null==n?void 0:n.email),l=(null==t?void 0:t.userId)||i||o;window._mfq.push(["stop"]),l&&window.mouseflow.identify(l),window.mouseflow.start(),A(a),O(t)}},{key:"track",value:function(e){var t=e.message,r=t.event,n=t.properties;r?(window._mfq.push(["tag",r]),A(n),O(t)):R.error("Event name from track call is missing")}},{key:"page",value:function(e){var t=e.message.properties.path||e.message.context.path;t&&window._mfq.push(["newPageView",t])}}])}();return e.Mouseflow=j,e}({});
//# sourceMappingURL=Mouseflow.min.js.map
